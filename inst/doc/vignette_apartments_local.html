<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Anna Kozak" />

<meta name="date" content="2020-09-07" />

<title>Example of local variable importance</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Example of local variable importance</h1>
<h4 class="author">Anna Kozak</h4>
<h4 class="date">2020-09-07</h4>



<div id="example-of-local-variable-importance" class="section level2">
<h2>Example of local variable importance</h2>
<p>In this vignette, we present a local variable importance measure based on Ceteris Paribus profiles for random forest regression model.</p>
<div id="dataset" class="section level3">
<h3>1 Dataset</h3>
<p>We work on Apartments dataset from <code>DALEX</code> package.</p>
<pre><code>#&gt;   m2.price construction.year surface floor no.rooms    district
#&gt; 1     5897              1953      25     3        1 Srodmiescie
#&gt; 2     1818              1992     143     9        5     Bielany
#&gt; 3     3643              1937      56     1        2       Praga
#&gt; 4     3517              1995      93     7        3      Ochota
#&gt; 5     3013              1992     144     6        5     Mokotow
#&gt; 6     5795              1926      61     6        2 Srodmiescie</code></pre>
</div>
<div id="random-forest-regression-model" class="section level3">
<h3>2 Random forest regression model</h3>
<p>Now, we define a random forest regression model and use explain from <code>DALEX</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">library</span>(<span class="st">&quot;randomForest&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>apartments_rf_model &lt;-<span class="st"> </span><span class="kw">randomForest</span>(m2.price <span class="op">~</span><span class="st"> </span>construction.year <span class="op">+</span><span class="st"> </span>surface <span class="op">+</span><span class="st"> </span>floor <span class="op">+</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="st">                                      </span>no.rooms, <span class="dt">data =</span> apartments)</span>
<span id="cb2-4"><a href="#cb2-4"></a>explainer_rf &lt;-<span class="st"> </span><span class="kw">explain</span>(apartments_rf_model,</span>
<span id="cb2-5"><a href="#cb2-5"></a>                        <span class="dt">data =</span> apartmentsTest[,<span class="dv">2</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">y =</span> apartmentsTest<span class="op">$</span>m2.price)</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; Preparation of a new explainer is initiated</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt;   -&gt; model label       :  randomForest  ( [33m default [39m )</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt;   -&gt; data              :  9000  rows  4  cols </span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt;   -&gt; target variable   :  9000  values </span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt;   -&gt; predict function  :  yhat.randomForest  will be used ( [33m default [39m )</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">#&gt;   -&gt; predicted values  :  numerical, min =  2125.558 , mean =  3513.492 , max =  5318.936  </span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt;   -&gt; model_info        :  package randomForest , ver. 4.6.14 , task regression ( [33m default [39m ) </span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">#&gt;   -&gt; residual function :  difference between y and yhat ( [33m default [39m )</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt;   -&gt; residuals         :  numerical, min =  -1176.432 , mean =  -1.968844 , max =  2122.887  </span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt;  [32m A new explainer has been created! [39m</span></span></code></pre></div>
</div>
<div id="new-observation" class="section level3">
<h3>3 New observation</h3>
<p>We need to specify an observation. Let consider a new apartment with the following attributes. Moreover, we calculate predict value for this new observation.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>new_apartment &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">construction.year =</span> <span class="dv">1998</span>, <span class="dt">surface =</span> <span class="dv">88</span>, <span class="dt">floor =</span> 2L, <span class="dt">no.rooms =</span> <span class="dv">3</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw">predict</span>(apartments_rf_model, new_apartment)</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt;        1 </span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt; 3900.397</span></span></code></pre></div>
</div>
<div id="calculate-ceteris-paribus-profiles" class="section level3">
<h3>4 Calculate Ceteris Paribus profiles</h3>
<p>Let see the Ceteris Paribus Plots calculated with <code>DALEX::predict_profile()</code> function. The CP also can be calculated with <code>DALEX::individual_profile()</code> or <code>ingredients::ceteris_paribus()</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">library</span>(<span class="st">&quot;ingredients&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a>profiles &lt;-<span class="st"> </span><span class="kw">predict_profile</span>(explainer_rf, new_apartment)</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="kw">plot</span>(profiles) <span class="op">+</span><span class="st"> </span><span class="kw">show_observations</span>(profiles)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="calculate-measure-of-local-variable-importance" class="section level3">
<h3>5 Calculate measure of local variable importance</h3>
<p>Now, we calculated a measure of local variable importance via oscillation based on Ceteris Paribus profiles. We use variant with all parameters equals to TRUE.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">library</span>(<span class="st">&quot;vivo&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a>measure &lt;-<span class="st"> </span><span class="kw">local_variable_importance</span>(profiles, apartments[,<span class="dv">2</span><span class="op">:</span><span class="dv">5</span>], </span>
<span id="cb5-3"><a href="#cb5-3"></a>            <span class="dt">absolute_deviation =</span> <span class="ot">TRUE</span>, <span class="dt">point =</span> <span class="ot">TRUE</span>, <span class="dt">density =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">plot</span>(measure)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>For the new observation the most important variable is surface, then floor, construction.year and no.rooms.</p>
</div>
<div id="comparison-of-two-or-more-methods-of-calculating-the-importance-of-variables" class="section level3">
<h3>6 Comparison of two or more methods of calculating the importance of variables</h3>
<p>We calculated local variable importance for different parameters and we can plot together, on bar plot or lines plot.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>measure_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">local_variable_importance</span>(profiles, apartments[,<span class="dv">2</span><span class="op">:</span><span class="dv">5</span>], </span>
<span id="cb7-2"><a href="#cb7-2"></a>            <span class="dt">absolute_deviation =</span> <span class="ot">FALSE</span>, <span class="dt">point =</span> <span class="ot">TRUE</span>, <span class="dt">density =</span> <span class="ot">TRUE</span>)</span>
<span id="cb7-3"><a href="#cb7-3"></a>measure_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">local_variable_importance</span>(profiles, apartments[,<span class="dv">2</span><span class="op">:</span><span class="dv">5</span>], </span>
<span id="cb7-4"><a href="#cb7-4"></a>            <span class="dt">absolute_deviation =</span> <span class="ot">FALSE</span>, <span class="dt">point =</span> <span class="ot">TRUE</span>, <span class="dt">density =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">plot</span>(measure, measure_<span class="dv">2</span>, measure_<span class="dv">3</span>, <span class="dt">color =</span> <span class="st">&quot;_label_method_&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">plot</span>(measure, measure_<span class="dv">2</span>, measure_<span class="dv">3</span>, <span class="dt">color =</span> <span class="st">&quot;_label_method_&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;lines&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAABYlBMVEUAAAAAADoAAGYAOmYAOpAAZrY2H7M2H8I2S7M2S8I2S9I2c+E3HqM6AAA6ADo6AGY6OpA6kJA6kNtDeL9dH6NdH7NdH8JdS6NdS7NdS8JdS9Jdc8Jdc9Jdc+FdmdJdmeFdmfBmAABmADpmAGZmOgBmOpBmZjpmZmZmtv+AH6OAH7OAH8KAS6OAS7OAc6OAc8KAmdKAmeGAmfCAvOGAvPCAvP+L3L6QOgCQOjqQOmaQZgCQkDqQkGaQkLaQtpCQ27aQ2/+iS6OiS7Oic7Oic8KimbOimeGivNKivPCi3uGi3vCi3v+2ZgC2Zjq2Zma225C22/+2/7a2///Bc6PBc7PBvOHB3tLB3v/B/+HB//DB///bkDrb25Db/9vb///hmbPhvMLhvNLhvOHh3tLh3uHh3v/h///l5eXr6+vwWnH/tmb/vML/25D/27b/3tL/3uH/3vD//7b//9v//+H///D///96MowvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAOxElEQVR4nO2di38bRxHHlRDLJbo4wZILKY/aCVC7DSU85AQoJaYUKDavqCU0LhZPx4qMgx3f/8/O7OzrXiPpTpJPmt/nI51ud++k+2p29m52dGrEokI15v0BrroEECMBxEgAMRJAjAQQIwHESAAxEkCMBBCj+gE667TGaH25t/p8pIbDaDOxYXMflgKIJIDGlABiN1wMQH//ahS98WN8eflpJ2r+EF+++kgVR3ef+YD61IewL7kGcX/1rw+i1We6i/kbNn/3qXpZb0CXexHq5rF9vYlNdLGyAQforAOt4rinSr0GCtD7sAMEFGzYBFZRvQH1o+Zv4/gfHTi4fvTlZ6oSjrkXva1YvNpRxV4X60XdmDh5DWAf0JcQULAh7PuyV2tAxk/AQdPrvjcY9UNAw6iFhd2ggdlimNoQG76uNaDXO7rXAAXzWuvy35/96ntRCAhfmnXbwBAjQKkNFwRQc98HdPmRdiUhIDQMvbXXIACUseGCAAotqBc1v//rz/6T6GLYEzUOr0EAKGPDWgPK8EFQS6yUFwkBqQHsE6zyG/iAwg0XwAelR7FXcFivd6D01YNkF1MQvoaexm8QAvI3hH2/2qsjIPIT6sAyzoPgZc+0aIWA4KDR5LwGiS7mb/h+Xc+DHKD0mfQ3j+lV9MYP/oU9z7/U6EfktFyD0EkHG36uzqS/UT9AM5YAYiSAGAkgRgKIkQBiJIAYCSBGAoiRAGIkgBgJIEYCiJEAYiSAGAkgRgKIkQBiJIAYCSBGAoiRAGIkgBgJIEYCiJEAYiSAGFUF6L9/ik/XnqTLX15/WtE7zEkVAQI4AqhAAsjpdO3DW43G+ql62o7ji0eNxvWnp1iy9kHDlq2oludbjWsfLCGgWzeO4sMGPF1/evFIkTi8cYQWdMuVweN8a109lhHQtnlae4I96HxrWwPyytQTLg+XEBC4GvN02ECtWx8EgJQhYR0uby85IIAQe05aAIWAXl57YguDMtPFlnIU8wBdPFJmoogoN+SVGSe9spxO2geEQzpYzEFjJShb4mF+ySSAGAkgRgKIkQBiJIAYCSBGAoiRAGIkgBgJIEYCiJEAYiSAGAkgRgKIURlAu7u7uXUH2+kyF5/OjFRfPNrObV0c2oZpuUZjPY7P7z1xG55vwZQdVV7LmNQs+EQQ81O68cWtEoB2dwsIlQeUtV2ObIOX76zbNYgC45TdSNMG6VZYcnp7EkC7aXn71TOuB+/g4iV+ifBlwnepLeH09p9hVZcZqbUvfXtbNzy9cxRfPP7wtv72t6Hsj2qFdnLnp7jnrKO7ePyL7xyZNVwokwoP/fz+z9Ca3CfC/YUfZpqAwMhh1wf41Z3ffxofrihc6/FLLNCAcKHKoIoELdRxY+HFY7WPO1+ozfXO3Aawk1u4iBG+nuq2gBRZZbm0hvMJcdI2zrduHMFMi/tEt8yrYJelAAWYMmoAC3Sxg230CbpAf5cOEFRBudtEdTEqPFSY1k1PuU+A3E5S/QHdDMyBq2Nd8Tocuh7tg2j+Djue+gKyPlHiKDSgKfigA+xVv3+Cfki9wTVtUupThYC2fNeJn+ZgmwpP7/ztse4auDNnRHonaUDGZhrU3NWsJbvYPfxgWZ8oE1AJC8oexXCC7DZaEDldZb+ZFnQ/dA3agnShckB3sIfqneVYUKqLge+ig4dq7L921QOUb0GVdrFs4futPYkP0NTBWcDD9nj4fIfXPZditnM+6CUmj6xbl75mDsPuJM+CDreRiz+KpZ301kr4iaZpQZk6bOBwpEYxPZ8YjmJQ/ZX7Ty8e4SjmnZyo7kGj2DWafqTWqlS19kaxXEAXP4Hn83sfotNZwfMg64MaZEnn976bGMX0/uATzQbQ1dUfNKDMM8Z8zRkQfb3Z57nV6uLn8Fw3QFdfAoiRAGIkgBgJIEYCiJEAYiSAGAkgRgKIkQBiJIAYlQE0GAxy62TaB/nkE1rqaZ9BWt5+ZdqnEJBM+yQxZdTItI9HKF0s0z4+oVSZTPswkmkfTjLtU1vJtE+xZNpnOhJAjAQQIwHESAAxEkCMBBAjAcRIADESQIwEECMBxKgMoHa7nVs3y2kfb46m0TAhEb1ZySkfUP77cmq3CwjNdNrHBm+gnZ3p4bgW7N/b3SSA2ml5+57DtE9wRJZLCtDYUz7TADSXaZ8RLWjsKZ9JAQWYMmpmPu3j5mj0BE/CB00+5TMVHzSHaR/vK8db8OVZ0LhTPrC7qkexuUz7+H0Cbv2pDff0zlEa0FhTPrC7hZj28Y8I7y6r3l29WE9NO4855QO7W4hpn3AUU54X3hfSYUpO+ZRz0rXSZFM+oOWY9plwyge0JBY0uQQQIwHESAAxEkCMBBAjAcRIADESQIwEECMBxEgAMRJAjAQQIwHESAAxEkCMBBAjAcRIADESQIwEECMBxEgAMRJAjOoI6GSW6wJIAAkgAZSQAGIkgBgJIEaLD6gX3Twepd1ZJ2ru24XVwgN6/e4+3wja7XTj/upzWrjyqoHYdGb9LwbhTW3mAejszed8I2qnYNLClVcMyCbE6//BSNwWaQaAhhH0EDhM9Ti7+yBS6qrCqIW9J+qCrURkIlAeYVkcX+514+HNY1q4HVYLyP6kgv5JJXFjrekDgi9fHZ8B1OnCArrNsLkPC7UGCPoZbulyD50VLbRepHWSUTZ6PQF68SIA9GKGgBSEOLYWtLFvupgiR4aR6kRmy03tgzan6YPmbkHQf6KuBaQX2Lea+2Q2sEIDld/FlsUHKQ1Xn4eAwJBCC8rQDAHpVziKDWY9igGLoR2sCZAqiHvkgzb2wQdlQLrcw75FC1dedRcz62aUn/V5kB7F4n4Ufes9A0j53ehtwGJHsWbGudFMThTbsQMUowHN/USxrCoF1E4Bmv+ZdFlVCQjcjwAqWG/HIaCBAArW2x4gGsOuwMVqWVUJyFs3BiSA3Ho7DSjZfqkB0QmiAMpbb/vrdJmRbL/MgNoJQGRAVwdQL4pWRwmd0em2VSWAvNtG4Dpdx6fazxEQXYfy7XTsyBVUAaidAGQiHan2cwRE1/as4JIfLmetKgAU3JnlxI8FJdvPDxB0nIc6MuSuSM/uPsBe54eFQBR1i6uKKNowItU7QKaFeee5WxB2oFWzgIhslvoVx6QTFrR7FS2IAIVRMQgeZSgIB5UHlLgt1G7I54oBIg9DC+OUwi7WD4NFZQEhm5DPYOD4XDFACQvK8tr9xMlA+SC9t+pZTmb7uQNK+KAMQKluVzJA5vOhnlXQfu6AEqNYBqBeOKCVDG94EUSDp3D75brU0Obj4j/aegQQLU3vMpcWpnMJIL2w3sdcWhjfI4DgKbj2Cl2zAIrDwUv3rhG3Xw5ARXgEkL60oNdpPAIohWes7RcfUIIPd96TXK8a0Kj5h8U7UKfVEN9wi4mSF+iatH2i5wRt55oBoGwMpeHEEBlTV6aYU9Zyi8myXG1Q48TGM8baXuuKAepHX6cUtPAKf4IEKhfzCfFUB4gmE8xV5MdRtEnJPpjOA9HRv3gJdV1dai8/zRZKvRYce8sks+oM18zo6j9NsqdHJsxyHTnk6qKqxGeckOwoIVfKQLWx0E2MSngpqx2beEhNvTW3BaJWFeowKZmVZilyoqtIBToVEMdFmOXKfeNm3UUNBwkDqsqCwgxUyk71U1Y3bPKz19QLgbl8Vkqx8/pKfnTVOGnKP1OLSbJc7c32B4NkB6sMEMXJvVio/nK9lFXz6AeAElvgvlpxf9Mms+oM1+zoqt3EIzm2DyLTAT6aTcBnShbkDtelrBZbkAfo9Xuf/9LaE2W4FqS2esvQ8EY6QBuPH2jzKReBZHzQxr4XC6X0XVij7uP93EQVed3Qg4jqPXzr2PQ0ynAtzv0Fx06L8bJcU3hKhmhHH8X04eqUVeU29QSETl2lpqY03KIHI9kQu5BOZqUM1yILUu8CRkmLMU4U2/rE0OLZHRvIGICqVBXnkFa5B0TWc4LJ8hOeGCbXZwSo36pwZ0VnzjH9zfvEJ4bJ9ZkAOuuMlOYyqvICYiGeCc97kuuLcTVfhEcAhX1rECfwLD0gDs+SAwrw0IV7KSDJ9XoDoniP/RGcNp+lAzSMsk8UE9YTV3JimFyvASC6vHEFJ3QpiljMuBW7sWvZAIGCi1UbyTBKRDTqA8gEFd3FFIYRg4SXy72HnailXrf8vpRM4vRzFBN8bEg1+wDLrk8XEIUh9eW9LunGYcrU5R7EGG8eQ+BAhyuz9uN8kI2lEp9JQ6rlQ65VANLxDy+gY+MkQcSZHi7XNyXfB4WA4lpbUBBiNCVh2qYHiMKVoFSedMoHucGLpnVcfe0A+RaUOWdhHnFoKp7CiKILien1MiFVbn0WgHwfRGFI3wdZQKnxXAuKzt6a2s1NrgAgM4r1Nu2chT+KOQtKnhGS+olfBS0OoClJADESQIwEECMBxEgAXSUJIEYCiJEAYiSAGAkgRgKIkQBiJIAY1RkQxk4u9zAWQgu/Vud/5dZTbCW3nlRjQJiUDzl6kIZNC79W3xIlr95E5/LqjeoLSCflQywWgpbvJn8xTSHv3HqQKi2sB9UXUFZSfqKJsqLC+r5Oic+tB9UXUNYMQKJBMQCcbVtqQJA7XAiAkpWXFRDeEqW4C+b/osiq7oDynazOPV9iJ03nQUXDOCiv3sy2Le4wT4DoN2jufxVI5pYoefVmti23nlRnQDORAGIkgBgJIEYCiJEAYiSAGAkgRgKIkQBitCiAzjZ+04miTReIxisH/KX+Ji27+voMfp795sfR6nPTqFgLA6hz81hdXsETHHorNjfBwH9cQjCdrgXUaQHEVpz5t2+hFgdQ1zxt7A/15Wf3f3D0aDF0swILqEsJxwW566SFAUTHjk99nYaub1YDkzs9/ENFB2hD/1sVNSrUYgKijvN6B6LOGBjCcEYIaLT/el1IQOYvAvCXMWYFpjh8QMOslOy0FhIQ/IIIAAzxVjNN7ZPwPiSbyjc3NSDTiNnxQgLCYR5z+9Xik52ucUU43P/I3LrINCrWogCamgQQIwHESAAxEkCMBBAjAcRIADESQIwEEKP/A9809u5YjdptAAAAAElFTkSuQmCC" /><!-- --></p>
</div>
<div id="comparison-of-the-importance-of-variables-for-two-or-more-models" class="section level3">
<h3>7 Comparison of the importance of variables for two or more models</h3>
<p>Let created a linear regression model and <code>explain</code> object.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>apartments_lm_model &lt;-<span class="st"> </span><span class="kw">lm</span>(m2.price <span class="op">~</span><span class="st"> </span>construction.year <span class="op">+</span><span class="st"> </span>surface <span class="op">+</span><span class="st"> </span>floor <span class="op">+</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="st">                                      </span>no.rooms, <span class="dt">data =</span> apartments)</span>
<span id="cb10-3"><a href="#cb10-3"></a>explainer_lm &lt;-<span class="st"> </span><span class="kw">explain</span>(apartments_lm_model,</span>
<span id="cb10-4"><a href="#cb10-4"></a>                        <span class="dt">data =</span> apartmentsTest[,<span class="dv">2</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">y =</span> apartmentsTest<span class="op">$</span>m2.price)</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">#&gt; Preparation of a new explainer is initiated</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">#&gt;   -&gt; model label       :  lm  ( [33m default [39m )</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">#&gt;   -&gt; data              :  9000  rows  4  cols </span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">#&gt;   -&gt; target variable   :  9000  values </span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">#&gt;   -&gt; predict function  :  yhat.lm  will be used ( [33m default [39m )</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">#&gt;   -&gt; predicted values  :  numerical, min =  2231.8 , mean =  3507.346 , max =  4769.053  </span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">#&gt;   -&gt; model_info        :  package stats , ver. 3.6.3 , task regression ( [33m default [39m ) </span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">#&gt;   -&gt; residual function :  difference between y and yhat ( [33m default [39m )</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co">#&gt;   -&gt; residuals         :  numerical, min =  -733.2516 , mean =  4.177813 , max =  2107.979  </span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#&gt;  [32m A new explainer has been created! [39m</span></span></code></pre></div>
<p>We calculated Ceteris Paribus profiles and measure.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>profiles_lm &lt;-<span class="st"> </span><span class="kw">predict_profile</span>(explainer_lm, new_apartment)</span>
<span id="cb11-2"><a href="#cb11-2"></a></span>
<span id="cb11-3"><a href="#cb11-3"></a>measure_lm &lt;-<span class="st"> </span><span class="kw">local_variable_importance</span>(profiles_lm, apartments[,<span class="dv">2</span><span class="op">:</span><span class="dv">5</span>], </span>
<span id="cb11-4"><a href="#cb11-4"></a>            <span class="dt">absolute_deviation =</span> <span class="ot">TRUE</span>, <span class="dt">point =</span> <span class="ot">TRUE</span>, <span class="dt">density =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">plot</span>(measure, measure_lm, <span class="dt">color =</span> <span class="st">&quot;_label_model_&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;lines&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Now we can see the order of importance of variables by model for selected observation.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
